<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>C：最終｜探索用ダッシュボード</title>
  <link rel="stylesheet" href="./css/style.css" />
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1>C：最終（探索用ダッシュボード）</h1>
        <div class="subtitle">
          指標の切り替え・監督フィルタ・公開年レンジを使って、関係性を探索する。
        </div>
      </div>
      <nav class="nav">
        <a href="./index.html">Top</a>
        <a href="./a.html">A：静的</a>
        <a href="./b.html">B：動的</a>
        <a class="active" href="./c.html">C：最終</a>
      </nav>
    </div>

    <div class="grid2">
      <div class="card">
        <h2>操作</h2>
        <div class="hr"></div>

        <div class="formRow">
          <label for="xMetric">X軸</label>
          <select id="xMetric">
            <option value="runtime">上映時間（分）</option>
            <option value="gross">興行収入（USD）</option>
            <option value="year">公開年</option>
            <option value="rating">評価（IMDb）</option>
          </select>
        </div>

        <div class="formRow">
          <label for="directorFilter">監督</label>
          <select id="directorFilter"></select>
        </div>

        <div class="rangeBlock">
          <div class="rangeTop">
            <div class="rangeLabel">公開年（最小）</div>
            <div class="rangeValue" id="minYearLabel">—</div>
          </div>
          <input id="minYear" type="range" min="1900" max="2100" value="1900" />
        </div>

        <div class="rangeBlock">
          <div class="rangeTop">
            <div class="rangeLabel">公開年（最大）</div>
            <div class="rangeValue" id="maxYearLabel">—</div>
          </div>
          <input id="maxYear" type="range" min="1900" max="2100" value="2100" />
        </div>

        <div class="status" id="status"></div>

        <div class="footerNote">
          追加操作：散布図上をドラッグして範囲選択（brush）すると、右の表に選択作品が出る。
        </div>
      </div>

      <div class="card">
        <h2>選択した作品の一覧</h2>
        <div class="hr"></div>
        <div class="tableWrap">
          <table class="table">
            <thead>
              <tr>
                <th>Title</th>
                <th>Year</th>
                <th>Director</th>
                <th>Rating</th>
                <th>Gross</th>
              </tr>
            </thead>
            <tbody id="tbody"></tbody>
          </table>
        </div>
        <div class="footerNote">
          表は最大30件まで表示。条件が厳しすぎる場合はフィルタを緩める。
        </div>
      </div>
    </div>

    <div class="card">
      <h2>散布図（Y軸：評価固定）</h2>
      <p class="muted">X軸は選択した指標。点の色は監督で分ける。</p>
      <div class="hr"></div>
      <div id="chart"></div>
    </div>
  </div>

  <script src="./js/c_dashboard.js"></script>
</body>
</html>
